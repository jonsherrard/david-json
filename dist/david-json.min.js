(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b=[].slice;!function(c){var d,e,f;return f=0,e=0,d=function(){function b(b,d){this.childLoop=a(this.childLoop,this),this.loop=a(this.loop,this),this.options=c.extend({},this.defaults,d),this.$el=c(b),this.loop(this.$el,this.options.json,0),this.$el}var d,g;return g=[],d="<div style='';class='json-input-controls'><a class='controls-toggle'><span class='glyphicon glyphicon-wrench float-left'></span></a><div style='display: block;' class='json-input-controls-container'><button class='btn btn-success float-left controls-clone'>Clone</button><button class='btn btn-danger float-left controls-delete'> Delete</button></div></div></div>",g["key-value"]=function(a,b,c,e){return"<div id="+e+" style='margin-left: "+c+"px;' class='key-value-row clearfix'><div class='json-input-container clearfix'><input value='"+a+"' type='text' class='form-control json-input json-input-key'/><span class='float-left json-separator'>==></span><span class='json-drag-icon glyphicon glyphicon-move float-left'></span><input value='"+b+"' type='text' class='form-control json-input json-input-value'/>"+d+"<div style='display:none;' class='json-input-children-container'></div></div>"},g["key-object"]=function(a,b,c,e){return"<div id='"+e+"' style='margin-left: "+c+"px;' class='key-object-row clearfix'><div class='json-input-container clearfix'><input value='"+a+"' type='text' class='form-control json-input json-input-key'/><span class='float-left json-separator'>==></span><span class='json-drag-icon glyphicon glyphicon-move float-left'></span><button class='btn btn-primary btn-default json-input-btn children-toggle'>Expand</button>"+d+"<div style='display: none;' class='json-input-children-container'></div></div>"},g["key-array"]=function(a,b,c,e){return"<div id='"+e+"' style='margin-left: "+c+"px;' class='key-array-row clearfix'><div class='json-input-container clearfix'><input value='"+a+"' type='text' class='form-control json-input json-input-key'/><span class='float-left json-separator'>==></span><span class='json-drag-icon glyphicon glyphicon-move float-left'></span><button style='display: inline-block;display: none;' class='btn btn-default json-input-btn children-sort'>Reorder</button><button class='btn btn-primary btn-default json-input-btn children-toggle'>Expand</button>"+d+"<div style='display: none;' class='json-input-children-container'></div></div>"},g["array-index-object"]=function(a,b,c,e){return"<div id='"+e+"' style='margin-left: "+c+"px;' class='array-key-object-row clearfix'><div class='json-input-container clearfix'><input value='"+a+"' type='text' class='form-control json-input json-input-key'/><span class='float-left json-separator'>==></span><span class='json-drag-icon glyphicon glyphicon-move float-left'></span><button class='btn btn-primary btn-default json-input-btn children-toggle'>Expand</button>"+d+"<div style='display: none;' class='json-input-children-container'></div></div>"},b.prototype.defaults={offset:30},b.prototype.uniqueId=function(a){var b;return b=++f+"",a?a+b:b},b.prototype.getOffset=function(){return e+=this.options.offset},b.prototype.getPrototype=function(a){return Object.prototype.toString.call(a).slice(8,-1)},b.prototype.dataType=function(a){var b,c,d;return b=void 0,null===a?d="null":a===b?d="undefined":(c=this.getPrototype(a),d="Number"===c&&isNaN(a)?"NaN":c),d.toLowerCase()},b.prototype.loop=function(a,b,d){var e,f,h,i,j,k;this.getOffset();for(h in b)j=b[h],k=this.dataType(j),f=this.uniqueId("row"),"array"!==k&&"object"!==k?(e=c(g["key-value"](h,j,d,f)),e.attr("data-type",k),a.append(e),i=a.parent().find(".json-select:first")):(e=c(g["key-"+k](h,j,d,f)),e.attr("data-type",k),a.append(e),this.childLoop(f,j));return this.setupEvents(e)},b.prototype.setupEvents=function(a){var b,c;return b=a.find(".controls-clone:first"),c=a.find(".controls-delete:first"),b.hover(function(){return console.log("why")})},b.prototype.selectType=function(a,b){var d,e,f,g,h,i,j;for(d=a.find(".json-select:first"),g=d.children("option"),j=[],h=0,i=g.length;i>h;h++)f=g[h],e=c(f),""+e.val()==""+b?j.push(e.attr("selected",!0)):j.push(void 0);return j},b.prototype.childLoop=function(a,b){var d,e;return e=c("#"+a),d=e.children(".json-input-children-container"),this.toggleEvents(e),this.loop(d,b,this.options.offset)},b.prototype.clone=function(a){return console.log(a)},b.prototype["delete"]=function(a){return console.log(a)},b.prototype.toggleEvents=function(a){var b,c;return b=a.find(".children-toggle"),c=a.find(".controls-toggle"),b.on("click",function(b){var c,d,e;return b.stopImmediatePropagation(),b.stopPropagation(),e={},c=a.children().children(".children-toggle"),d=a.find(".json-input-children-container:first"),this.expanded?(d.hide(),c.removeClass("btn-warning"),c.html("Expand")):(d.show(),c.addClass("btn-warning"),c.html("Collapse")),this.expanded=!this.expanded,!0})},b.prototype.json=function(){var a,b,d,e;this.object={},d=c("#editor").children(),a=this.objectLoop(d);for(b in a)e=a[b],this.object[b]=e;return this.object},b.prototype.objectLoop=function(a){var b,c,d,e,f;for(d={},e=0,f=a.length;f>e;e++)b=a[e],c=this.getKeyValue(b),d[c.key]=c.value;return d},b.prototype.arrayLoop=function(a){var b,c,d,e,f;for(b=[],e=0,f=a.length;f>e;e++)c=a[e],d=this.getKeyValue(c),b.push(d.value);return b},b.prototype.getKeyValue=function(a){var b,d,e,f,g;return e={},b=c(a).children(".json-input-container"),d=b.children(".json-input-key").val(),g=b.children(".json-input-value").val(),f=this.getValueType(a),void 0===g&&("object"===f&&(g=this.objectLoop(this.getChildren(a))),"array"===f&&(g=this.arrayLoop(this.getChildren(a)))),"number"===f&&(g=parseInt(g,10)),"boolean"===f&&(g=JSON.parse(g)),e.key=d,e.value=g,e},b.prototype.getChildren=function(a){var b;return b=c(a).children(".json-input-children-container").children()},b.prototype.getValueType=function(a){var b;return b=c(a).attr("data-type")},b}(),c.fn.extend({davidJson:function(){var a,e,f;return e=arguments[0],a=2<=arguments.length?b.call(arguments,1):[],f=null,this.each(function(){var b,g;return b=c(this),g=b.data("davidJson"),g||b.data("davidJson",g=new d(this,e)),"string"==typeof e?f=g[e].apply(g,a):void 0}),f||(f=this),f}})}(window.jQuery,window)}).call(this);